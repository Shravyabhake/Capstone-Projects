package com.reusablePages;

import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.FindBy;
import org.openqa.selenium.support.PageFactory;

import utility.Waits;

import org.openqa.selenium.By;

public class Loginpage {
    WebDriver driver;
    utility.Waits wait;

    // PageFactory Locators
    @FindBy(id = "signin")
    WebElement signin;

    @FindBy(xpath = "//div[text()='Select Username']")
    WebElement usernameDropdown;

    @FindBy(xpath = "//div[text()='Select Password']")
    WebElement passwordDropdown;

    @FindBy(xpath = "//button[text()='Log In']")
    WebElement loginBtn;
    
    @FindBy(xpath="//span[text()='Logout']") 
    WebElement logoutBtn;
    
    public Loginpage(WebDriver driver) {
        this.driver = driver;
        PageFactory.initElements(driver, this);
        wait = new Waits(driver, 10);
    }

    // Method to login
    public String logincred(String username, String password) {
        // Step 1: Click Sign In
        wait.waitForClickable(signin).click();

        wait.waitForClickable(usernameDropdown).click();
        By userOption = By.xpath("//div[text()='\" + username + \"']");
        wait.waitForClickable(userOption).click();

        wait.waitForClickable(passwordDropdown).click();
        By passOption = By.xpath("//div[text()='\\\" + password + \\\"']");
        wait.waitForClickable(passOption).click();
        
        
        // Step 4: Click Login
        wait.waitForClickable(loginBtn).click();
		return "Login attempted with user: " + username; 
   
    
    
    }
    public void logout() {
        wait.waitForClickable(logoutBtn).click();
    }
    
}
